import{F as re,j as t,a as Ve,g as Ae,s as Y,H as ce,_ as p,J as He,r as C,u as Ie,b as le,K as ue,L as Me,c as Le,M as ze,e as Ee,f as Q,h as Te,q as Pe,t as Oe,m as de,l as me,B as he,x as $e,C as _e,N as Ge,O as Ue,o as We,P as K,Q as qe,R as Be,G as h,p as Xe,U as ie}from"./main-cd0faa41.js";import{B as Ke,L as Qe}from"./index-c095300c.js";import{C as Ye}from"./index-0d8bc1f9.js";import{u as Je,a as Ze,P as ke}from"./index-24ed24ce.js";import{d as De,G as et}from"./index-63f41d47.js";import{H as tt,T as nt}from"./listChapter-c88bdf08.js";import{a as ot}from"./book-8c67ab38.js";import{P as st}from"./styled-ee6ea8a6.js";import"./CardHeader-43f1e55e.js";const it={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},at=it,rt=re(t.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),ct=re(t.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function lt(n){return Ae("MuiRating",n)}const ut=Ve("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),B=ut,dt=["value"],mt=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function ht(n,o,i){return n<o?o:n>i?i:n}function pt(n){const o=n.toString().split(".")[1];return o?o.length:0}function k(n,o){if(n==null)return n;const i=Math.round(n/o)*o;return Number(i.toFixed(pt(o)))}const gt=n=>{const{classes:o,size:i,readOnly:r,disabled:d,emptyValueFocused:m,focusVisible:g}=n,x={root:["root",`size${ce(i)}`,d&&"disabled",g&&"focusVisible",r&&"readOnly"],label:["label","pristine"],labelEmptyValue:[m&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return Te(x,lt,o)},xt=Y("span",{name:"MuiRating",slot:"Root",overridesResolver:(n,o)=>{const{ownerState:i}=n;return[{[`& .${B.visuallyHidden}`]:o.visuallyHidden},o.root,o[`size${ce(i.size)}`],i.readOnly&&o.readOnly]}})(({theme:n,ownerState:o})=>p({display:"inline-flex",position:"relative",fontSize:n.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent",[`&.${B.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${B.focusVisible} .${B.iconActive}`]:{outline:"1px solid #999"},[`& .${B.visuallyHidden}`]:at},o.size==="small"&&{fontSize:n.typography.pxToRem(18)},o.size==="large"&&{fontSize:n.typography.pxToRem(30)},o.readOnly&&{pointerEvents:"none"})),pe=Y("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:n},o)=>[o.label,n.emptyValueFocused&&o.labelEmptyValueActive]})(({ownerState:n})=>p({cursor:"inherit"},n.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),ft=Y("span",{name:"MuiRating",slot:"Icon",overridesResolver:(n,o)=>{const{ownerState:i}=n;return[o.icon,i.iconEmpty&&o.iconEmpty,i.iconFilled&&o.iconFilled,i.iconHover&&o.iconHover,i.iconFocus&&o.iconFocus,i.iconActive&&o.iconActive]}})(({theme:n,ownerState:o})=>p({display:"flex",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest}),pointerEvents:"none"},o.iconActive&&{transform:"scale(1.2)"},o.iconEmpty&&{color:(n.vars||n).palette.action.disabled})),vt=Y("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:n=>He(n)&&n!=="iconActive",overridesResolver:(n,o)=>{const{iconActive:i}=n;return[o.decimal,i&&o.iconActive]}})(({iconActive:n})=>p({position:"relative"},n&&{transform:"scale(1.2)"}));function yt(n){const o=le(n,dt);return t.jsx("span",p({},o))}function ae(n){const{classes:o,disabled:i,emptyIcon:r,focus:d,getLabelText:m,highlightSelectedOnly:g,hover:x,icon:E,IconContainerComponent:j,isActive:R,itemValue:e,labelProps:M,name:f,onBlur:G,onChange:F,onClick:N,onFocus:T,readOnly:P,ownerState:l,ratingValue:v,ratingValueRounded:U}=n,w=g?e===v:e<=v,L=e<=x,s=e<=d,u=e===U,V=ue(),A=t.jsx(ft,{as:j,value:e,className:Q(o.icon,w?o.iconFilled:o.iconEmpty,L&&o.iconHover,s&&o.iconFocus,R&&o.iconActive),ownerState:p({},l,{iconEmpty:!w,iconFilled:w,iconHover:L,iconFocus:s,iconActive:R}),children:r&&!w?r:E});return P?t.jsx("span",p({},M,{children:A})):t.jsxs(C.Fragment,{children:[t.jsxs(pe,p({ownerState:p({},l,{emptyValueFocused:void 0}),htmlFor:V},M,{children:[A,t.jsx("span",{className:o.visuallyHidden,children:m(e)})]})),t.jsx("input",{className:o.visuallyHidden,onFocus:T,onBlur:G,onChange:F,onClick:N,disabled:i,value:e,id:V,type:"radio",name:f,checked:u})]})}const bt=t.jsx(rt,{fontSize:"inherit"}),Ct=t.jsx(ct,{fontSize:"inherit"});function jt(n){return`${n} Star${n!==1?"s":""}`}const St=C.forwardRef(function(o,i){const r=Ie({name:"MuiRating",props:o}),{className:d,defaultValue:m=null,disabled:g=!1,emptyIcon:x=Ct,emptyLabelText:E="Empty",getLabelText:j=jt,highlightSelectedOnly:R=!1,icon:e=bt,IconContainerComponent:M=yt,max:f=5,name:G,onChange:F,onChangeActive:N,onMouseLeave:T,onMouseMove:P,precision:l=1,readOnly:v=!1,size:U="medium",value:w}=r,L=le(r,mt),s=ue(G),[u,V]=Me({controlled:w,default:m,name:"Rating"}),A=k(u,l),ee=Le(),[{hover:y,focus:H},W]=C.useState({hover:-1,focus:-1});let O=A;y!==-1&&(O=y),H!==-1&&(O=H);const{isFocusVisibleRef:te,onBlur:fe,onFocus:ve,ref:ye}=ze(),[be,J]=C.useState(!1),ne=C.useRef(),Ce=Ee(ye,ne,i),je=a=>{P&&P(a);const c=ne.current,{right:b,left:X}=c.getBoundingClientRect(),{width:$}=c.firstChild.getBoundingClientRect();let _;ee.direction==="rtl"?_=(b-a.clientX)/($*f):_=(a.clientX-X)/($*f);let S=k(f*_+l/2,l);S=ht(S,l,f),W(z=>z.hover===S&&z.focus===S?z:{hover:S,focus:S}),J(!1),N&&y!==S&&N(a,S)},Se=a=>{T&&T(a);const c=-1;W({hover:c,focus:c}),N&&y!==c&&N(a,c)},oe=a=>{let c=a.target.value===""?null:parseFloat(a.target.value);y!==-1&&(c=y),V(c),F&&F(a,c)},Re=a=>{a.clientX===0&&a.clientY===0||(W({hover:-1,focus:-1}),V(null),F&&parseFloat(a.target.value)===A&&F(a,null))},Fe=a=>{ve(a),te.current===!0&&J(!0);const c=parseFloat(a.target.value);W(b=>({hover:b.hover,focus:c}))},Ne=a=>{if(y!==-1)return;fe(a),te.current===!1&&J(!1);const c=-1;W(b=>({hover:b.hover,focus:c}))},[we,se]=C.useState(!1),q=p({},r,{defaultValue:m,disabled:g,emptyIcon:x,emptyLabelText:E,emptyValueFocused:we,focusVisible:be,getLabelText:j,icon:e,IconContainerComponent:M,max:f,precision:l,readOnly:v,size:U}),I=gt(q);return t.jsxs(xt,p({ref:Ce,onMouseMove:je,onMouseLeave:Se,className:Q(I.root,d,v&&"MuiRating-readOnly"),ownerState:q,role:v?"img":null,"aria-label":v?j(O):null},L,{children:[Array.from(new Array(f)).map((a,c)=>{const b=c+1,X={classes:I,disabled:g,emptyIcon:x,focus:H,getLabelText:j,highlightSelectedOnly:R,hover:y,icon:e,IconContainerComponent:M,name:s,onBlur:Ne,onChange:oe,onClick:Re,onFocus:Fe,ratingValue:O,ratingValueRounded:A,readOnly:v,ownerState:q},$=b===Math.ceil(O)&&(y!==-1||H!==-1);if(l<1){const _=Array.from(new Array(1/l));return t.jsx(vt,{className:Q(I.decimal,$&&I.iconActive),ownerState:q,iconActive:$,children:_.map((S,z)=>{const Z=k(b-1+(z+1)*l,l);return t.jsx(ae,p({},X,{isActive:!1,itemValue:Z,labelProps:{style:_.length-1===z?{}:{width:Z===O?`${(z+1)*l*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),Z)})},b)}return t.jsx(ae,p({},X,{isActive:$,itemValue:b}),b)}),!v&&!g&&t.jsxs(pe,{className:Q(I.label,I.labelEmptyValue),ownerState:q,children:[t.jsx("input",{className:I.visuallyHidden,value:"",id:`${s}-empty`,type:"radio",name:s,checked:A==null,onFocus:()=>se(!0),onBlur:()=>se(!1),onChange:oe}),t.jsx("span",{className:I.visuallyHidden,children:E})]})]}))}),Rt=St;var D={},Ft=Oe;Object.defineProperty(D,"__esModule",{value:!0});var ge=D.default=void 0,Nt=Ft(Pe()),wt=t,Vt=(0,Nt.default)((0,wt.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonSharp");ge=D.default=Vt;const At=de(()=>({box:{width:"100%",maxHeight:"400px",minHeight:"370px",background:"#ecf0f1",padding:"10px 20px"},author:{width:"100%",borderBottom:"1px solid #ccc",marginBottom:"10px"},titleAuthor:{fontSize:"16px",borderBottom:"1px solid #4E4E4E",maxWidth:"235px",fontWeight:400},boxItem:{height:"40px",display:"flex",alignItems:"center",borderBottom:"1px dashed #CCC"},itemName:{width:"100%",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textDecoration:"none",color:"#000",cursor:"pointer"}})),Ht=n=>{const{data:o}=n,i=me(),r=At();return t.jsxs("div",{className:r.box,children:[t.jsx("div",{className:r.author,children:t.jsx("h2",{className:r.titleAuthor,children:"TRUYỆN CÙNG TÁC GIẢ"})}),o&&o.length>0&&o.map((d,m)=>t.jsxs(he,{className:r.boxItem,children:[t.jsx(De,{}),t.jsx($e,{className:r.itemName,onClick:()=>{i("/"+(d==null?void 0:d.slug))},children:d.name})]},m))]})},xe=de(()=>({boxBook:{cursor:"pointer"},imageContainer:{width:"100%",height:0,paddingBottom:"calc(322/215 * 100%)",position:"relative","& img":{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}},titleBook:{fontSeight:600,fontSize:"24px",color:_e.MAIN_COLOR},boxIconTitle:{display:"flex",justifyContent:"flex-start",alignItems:"center","& svg":{width:"20px",marginRight:10}},boxContainer:{display:"flex",alignItems:"center",gap:5},rating:{fontSize:25},buttonRead:{textTransform:"capitalize",fontWeight:"bold"},chapter:{width:"100%",borderBottom:"1px solid #ccc",marginBottom:"15px"},titleChapter:{fontSize:"20px",borderBottom:"1px solid #4E4E4E",maxWidth:"fit-content",fontWeight:400},itemChapter:{padding:"5px 0px",textOverflow:"ellipsis"},nameChapter:{textDecoration:"none",color:"#000","&:hover":{textDecoration:"underline",cursor:"pointer"}}})),Gt=()=>{var L;const n=xe(),o=Ge(),{rateBook:i,result:{isSuccess:r}}=ot(),[d]=C.useState(tt),[m,g]=C.useState([]),[x,E]=C.useState(1),j=50,R=me(),{data:e,refetch:M}=Je({slug:o.slug}),f=Ue(e==null?void 0:e.id)||r,[G]=Ze(),{control:F,reset:N}=We({defaultValues:{author:"",bookCover:"",category:{},description:"",genresList:[],id:NaN,name:"",rating:NaN,slug:"",status:"",totalChapters:NaN}}),T=C.useMemo(()=>{var s;return[{icon:ge,title:"Tác giả",content:e==null?void 0:e.author},{icon:K.HashTagSvg,title:"Thể loại",content:e==null?void 0:e.genresList,template:et},{icon:K.InfoCircleSvg,title:"Trạng thái",content:(s=qe)==null?void 0:s[e==null?void 0:e.status],sx:{color:"green"}},{icon:K.TagsSvg,title:"Số chương",content:e==null?void 0:e.totalChapters},{icon:K.AwardSvg,title:"Chất lượng",content:`Bản Dịch đến chương ${e==null?void 0:e.totalChapters}`}]},[e]),P=(s,u)=>{E(u),l(u)},l=s=>{if(e!=null&&e.chapter){const u=((e==null?void 0:e.chapter)||"").slice((s-1)*j,s*j);g(u)}},v=()=>{R("/"+o.slug+"/chuong-1")},U=()=>{R("/"+o.slug+"/chuong-"+(e==null?void 0:e.totalChapters))},w=async s=>{const u={content:s.comment,email:s.email,commentator:s.name,bookId:e==null?void 0:e.id};try{await G(u),M()}catch(V){console.log(V)}};return C.useEffect(()=>{N(e),l(x)},[e]),t.jsxs(Be.Fragment,{children:[t.jsx(Ke,{content:e==null?void 0:e.name}),t.jsx(ke,{children:t.jsxs(h,{container:!0,children:[t.jsx(h,{item:!0,sm:12,md:9,children:t.jsxs(h,{container:!0,children:[t.jsx(h,{xs:12,md:5,sx:{p:2,display:"flex",justifyContent:"center"},children:t.jsx("img",{src:e==null?void 0:e.bookCover,width:215,height:322,alt:"book-cover",loading:"lazy"})}),t.jsxs(h,{xs:12,md:7,sx:{p:2,display:"flex",flexDirection:"column",justifyContent:"space-around"},children:[t.jsx("h1",{className:n.titleBook,children:e==null?void 0:e.name}),t.jsx(h,{container:!0,spacing:2,children:T.map((s,u)=>t.jsx(It,{...s},u))}),t.jsxs(he,{className:n.boxContainer,sx:{flexDirection:{sm:"row",xs:"column"}},children:[t.jsx(Xe,{control:F,name:"rating",render:({field:{onChange:s,value:u,ref:V},fieldState:{error:A}})=>t.jsx(Rt,{max:10,disabled:f,precision:.5,onChange:async(ee,y)=>{const H=await i({bookId:e==null?void 0:e.id,point:y});s(H==null?void 0:H.ratingPoint)},value:u,classes:{icon:n.rating}})}),f&&"Cảm ơn bạn đã đánh giá!"]}),t.jsxs("div",{className:n.boxContainer,children:[t.jsx(ie,{className:n.buttonRead,label:"Đọc từ đầu",variant:"contained",color:"red",onClick:v}),t.jsx(ie,{className:n.buttonRead,color:"red",label:"Đọc Mới Nhất",onClick:U,variant:"contained"})]})]}),t.jsxs(h,{item:!0,xs:12,marginBottom:"15px",children:[t.jsx("div",{className:n.chapter,children:t.jsx("h2",{className:n.titleChapter,children:"DANH SÁCH CHƯƠNG"})}),t.jsx(h,{container:!0,marginLeft:"15px",children:(m==null?void 0:m.length)>0&&m.map((s,u)=>t.jsx(h,{item:!0,xs:6,children:t.jsx("div",{className:n.itemChapter,children:t.jsxs(Qe,{onClick:()=>{R((s==null?void 0:s.slug)||"/")},className:n.nameChapter,children:["Chương ",s==null?void 0:s.chapterOrder,": ",s.name]})},u)}))}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:t.jsx(st,{count:Math.ceil((((L=e==null?void 0:e.chapter)==null?void 0:L.length)||0)/j),page:x-1,onChange:P,variant:"outlined",shape:"rounded"})})]}),t.jsx(h,{item:!0,xs:12,children:t.jsx(Ye,{data:e==null?void 0:e.comments,handleSendComment:w})})]})}),t.jsxs(h,{item:!0,xs:12,md:3,sx:{p:2},children:[t.jsx(Ht,{data:e==null?void 0:e.booksByTheSameAuthor}),t.jsx(nt,{data:d})]})]})})]})},It=n=>{const{icon:o,title:i,content:r,template:d,sx:m}=n,g=xe(),x=o;return t.jsxs(t.Fragment,{children:[t.jsxs(h,{item:!0,xs:3,className:g.boxIconTitle,children:[t.jsx(x,{}),t.jsx("div",{children:i})]}),t.jsx(h,{item:!0,xs:9,children:d?d({listGenre:r}):r})]})};export{Gt as default};
