import{v as Ct,w as wt,x as he,_ as p,ac as Ge,Z as Ve,r as l,y as jt,z as Pt,U as Nt,W as Rt,a5 as St,X as Et,aV as It,$ as Ot,t as E,a7 as ze,aW as D,j as e,F as _t,H as Mt,J as Lt,s as xe,a as Ye,f as y,T as Xe,L as $t,C as At,l as Wt,R as Be,aX as Ft,e as kt,I as Ue,aY as Ht,G as h,aZ as zt}from"./main-cec559ee.js";import{E as Bt,d as Ut}from"./index-ec621077.js";import{B as Gt}from"./index-74547eef.js";import{C as Vt}from"./index-cbc24863.js";import{P as Yt}from"./index-e74c108d.js";import{P as qe,d as Xt}from"./KeyboardArrowRight-7d9fdd33.js";import{G as qt}from"./index-d643c683.js";import{H as Kt}from"./listChapter-3daab4f5.js";import{a as Zt}from"./book-786eac53.js";import{b as Jt,c as Qt}from"./index-1f934ad8.js";import{P as Dt}from"./Pagination-1e9045d9.js";import"./CardHeader-e6eb182d.js";function eo(o){return wt("MuiTooltip",o)}const to=Ct("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),C=to,oo=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function ro(o){return Math.round(o*1e5)/1e5}const so=o=>{const{classes:r,disableInteractive:s,arrow:c,touch:u,placement:f}=o,g={popper:["popper",!s&&"popperInteractive",c&&"popperArrow"],tooltip:["tooltip",c&&"tooltipArrow",u&&"touch",`tooltipPlacement${Ge(f.split("-")[0])}`],arrow:["arrow"]};return _t(g,eo,r)},no=he(qe,{name:"MuiTooltip",slot:"Popper",overridesResolver:(o,r)=>{const{ownerState:s}=o;return[r.popper,!s.disableInteractive&&r.popperInteractive,s.arrow&&r.popperArrow,!s.open&&r.popperClose]}})(({theme:o,ownerState:r,open:s})=>p({zIndex:(o.vars||o).zIndex.tooltip,pointerEvents:"none"},!r.disableInteractive&&{pointerEvents:"auto"},!s&&{pointerEvents:"none"},r.arrow&&{[`&[data-popper-placement*="bottom"] .${C.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${C.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${C.arrow}`]:p({},r.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${C.arrow}`]:p({},r.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),io=he("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(o,r)=>{const{ownerState:s}=o;return[r.tooltip,s.touch&&r.touch,s.arrow&&r.tooltipArrow,r[`tooltipPlacement${Ge(s.placement.split("-")[0])}`]]}})(({theme:o,ownerState:r})=>p({backgroundColor:o.vars?o.vars.palette.Tooltip.bg:Ve(o.palette.grey[700],.92),borderRadius:(o.vars||o).shape.borderRadius,color:(o.vars||o).palette.common.white,fontFamily:o.typography.fontFamily,padding:"4px 8px",fontSize:o.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:o.typography.fontWeightMedium},r.arrow&&{position:"relative",margin:0},r.touch&&{padding:"8px 16px",fontSize:o.typography.pxToRem(14),lineHeight:`${ro(16/14)}em`,fontWeight:o.typography.fontWeightRegular},{[`.${C.popper}[data-popper-placement*="left"] &`]:p({transformOrigin:"right center"},r.isRtl?p({marginLeft:"14px"},r.touch&&{marginLeft:"24px"}):p({marginRight:"14px"},r.touch&&{marginRight:"24px"})),[`.${C.popper}[data-popper-placement*="right"] &`]:p({transformOrigin:"left center"},r.isRtl?p({marginRight:"14px"},r.touch&&{marginRight:"24px"}):p({marginLeft:"14px"},r.touch&&{marginLeft:"24px"})),[`.${C.popper}[data-popper-placement*="top"] &`]:p({transformOrigin:"center bottom",marginBottom:"14px"},r.touch&&{marginBottom:"24px"}),[`.${C.popper}[data-popper-placement*="bottom"] &`]:p({transformOrigin:"center top",marginTop:"14px"},r.touch&&{marginTop:"24px"})})),ao=he("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(o,r)=>r.arrow})(({theme:o})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:o.vars?o.vars.palette.Tooltip.bg:Ve(o.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let ee=!1,me=null,k={x:0,y:0};function te(o,r){return s=>{r&&r(s),o(s)}}const lo=l.forwardRef(function(r,s){var c,u,f,g,v,a,w,I,H,R,z,t,B,U,oe,G,V,Y,O;const _=jt({props:r,name:"MuiTooltip"}),{arrow:M=!1,children:i,components:d={},componentsProps:b={},describeChild:Je=!1,disableFocusListener:Qe=!1,disableHoverListener:ge=!1,disableInteractive:De=!1,disableTouchListener:et=!1,enterDelay:be=100,enterNextDelay:Te=0,enterTouchDelay:tt=700,followCursor:re=!1,id:ot,leaveDelay:ve=0,leaveTouchDelay:rt=1500,onClose:ye,onOpen:Ce,open:st,placement:we="bottom",PopperComponent:se,PopperProps:j={},slotProps:P={},slots:X={},title:S,TransitionComponent:nt=ze,TransitionProps:it}=_,je=Pt(_,oo),ne=Nt(),at=ne.direction==="rtl",[L,Pe]=l.useState(),[ie,lt]=l.useState(null),q=l.useRef(!1),ae=De||re,K=l.useRef(),Z=l.useRef(),N=l.useRef(),Ne=l.useRef(),[pt,Re]=Rt({controlled:st,default:!1,name:"Tooltip",state:"open"});let T=pt;const le=St(ot),$=l.useRef(),J=l.useCallback(()=>{$.current!==void 0&&(document.body.style.WebkitUserSelect=$.current,$.current=void 0),clearTimeout(Ne.current)},[]);l.useEffect(()=>()=>{clearTimeout(K.current),clearTimeout(Z.current),clearTimeout(N.current),J()},[J]);const Se=n=>{clearTimeout(me),ee=!0,Re(!0),Ce&&!T&&Ce(n)},Q=Et(n=>{clearTimeout(me),me=setTimeout(()=>{ee=!1},800+ve),Re(!1),ye&&T&&ye(n),clearTimeout(K.current),K.current=setTimeout(()=>{q.current=!1},ne.transitions.duration.shortest)}),pe=n=>{q.current&&n.type!=="touchstart"||(L&&L.removeAttribute("title"),clearTimeout(Z.current),clearTimeout(N.current),be||ee&&Te?Z.current=setTimeout(()=>{Se(n)},ee?Te:be):Se(n))},Ee=n=>{clearTimeout(Z.current),clearTimeout(N.current),N.current=setTimeout(()=>{Q(n)},ve)},{isFocusVisibleRef:Ie,onBlur:ct,onFocus:ut,ref:dt}=It(),[,Oe]=l.useState(!1),_e=n=>{ct(n),Ie.current===!1&&(Oe(!1),Ee(n))},Me=n=>{L||Pe(n.currentTarget),ut(n),Ie.current===!0&&(Oe(!0),pe(n))},Le=n=>{q.current=!0;const m=i.props;m.onTouchStart&&m.onTouchStart(n)},$e=pe,Ae=Ee,mt=n=>{Le(n),clearTimeout(N.current),clearTimeout(K.current),J(),$.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ne.current=setTimeout(()=>{document.body.style.WebkitUserSelect=$.current,pe(n)},tt)},ht=n=>{i.props.onTouchEnd&&i.props.onTouchEnd(n),J(),clearTimeout(N.current),N.current=setTimeout(()=>{Q(n)},rt)};l.useEffect(()=>{if(!T)return;function n(m){(m.key==="Escape"||m.key==="Esc")&&Q(m)}return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[Q,T]);const xt=Ot(i.ref,dt,Pe,s);!S&&S!==0&&(T=!1);const ce=l.useRef(),ft=n=>{const m=i.props;m.onMouseMove&&m.onMouseMove(n),k={x:n.clientX,y:n.clientY},ce.current&&ce.current.update()},A={},ue=typeof S=="string";Je?(A.title=!T&&ue&&!ge?S:null,A["aria-describedby"]=T?le:null):(A["aria-label"]=ue?S:null,A["aria-labelledby"]=T&&!ue?le:null);const x=p({},A,je,i.props,{className:E(je.className,i.props.className),onTouchStart:Le,ref:xt},re?{onMouseMove:ft}:{}),W={};et||(x.onTouchStart=mt,x.onTouchEnd=ht),ge||(x.onMouseOver=te($e,x.onMouseOver),x.onMouseLeave=te(Ae,x.onMouseLeave),ae||(W.onMouseOver=$e,W.onMouseLeave=Ae)),Qe||(x.onFocus=te(Me,x.onFocus),x.onBlur=te(_e,x.onBlur),ae||(W.onFocus=Me,W.onBlur=_e));const gt=l.useMemo(()=>{var n;let m=[{name:"arrow",enabled:!!ie,options:{element:ie,padding:4}}];return(n=j.popperOptions)!=null&&n.modifiers&&(m=m.concat(j.popperOptions.modifiers)),p({},j.popperOptions,{modifiers:m})},[ie,j]),F=p({},_,{isRtl:at,arrow:M,disableInteractive:ae,placement:we,PopperComponentProp:se,touch:q.current}),de=so(F),We=(c=(u=X.popper)!=null?u:d.Popper)!=null?c:no,Fe=(f=(g=(v=X.transition)!=null?v:d.Transition)!=null?g:nt)!=null?f:ze,ke=(a=(w=X.tooltip)!=null?w:d.Tooltip)!=null?a:io,He=(I=(H=X.arrow)!=null?H:d.Arrow)!=null?I:ao,bt=D(We,p({},j,(R=P.popper)!=null?R:b.popper,{className:E(de.popper,j==null?void 0:j.className,(z=(t=P.popper)!=null?t:b.popper)==null?void 0:z.className)}),F),Tt=D(Fe,p({},it,(B=P.transition)!=null?B:b.transition),F),vt=D(ke,p({},(U=P.tooltip)!=null?U:b.tooltip,{className:E(de.tooltip,(oe=(G=P.tooltip)!=null?G:b.tooltip)==null?void 0:oe.className)}),F),yt=D(He,p({},(V=P.arrow)!=null?V:b.arrow,{className:E(de.arrow,(Y=(O=P.arrow)!=null?O:b.arrow)==null?void 0:Y.className)}),F);return e.jsxs(l.Fragment,{children:[l.cloneElement(i,x),e.jsx(We,p({as:se??qe,placement:we,anchorEl:re?{getBoundingClientRect:()=>({top:k.y,left:k.x,right:k.x,bottom:k.y,width:0,height:0})}:L,popperRef:ce,open:L?T:!1,id:le,transition:!0},W,bt,{popperOptions:gt,children:({TransitionProps:n})=>e.jsx(Fe,p({timeout:ne.transitions.duration.shorter},n,Tt,{children:e.jsxs(ke,p({},vt,{children:[S,M?e.jsx(He,p({},yt,{ref:lt})):null]}))}))}))]})}),po=lo;var fe={},co=Lt;Object.defineProperty(fe,"__esModule",{value:!0});var Ke=fe.default=void 0,uo=co(Mt()),mo=e,ho=(0,uo.default)((0,mo.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonSharp");Ke=fe.default=ho;const xo=xe(()=>({box:{width:"100%",maxHeight:"400px",minHeight:"370px",background:"#ecf0f1",padding:"10px 20px"},author:{width:"100%",borderBottom:"1px solid #ccc",marginBottom:"10px"},titleAuthor:{fontSize:"16px",borderBottom:"1px solid #4E4E4E",maxWidth:"235px",fontWeight:400},boxItem:{height:"40px",display:"flex",alignItems:"center",borderBottom:"1px dashed #CCC"},itemName:{width:"100%",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textDecoration:"none",color:"#000",cursor:"pointer"}})),fo=o=>{const{data:r}=o,s=Ye(),c=xo();return e.jsxs("div",{className:c.box,children:[e.jsx("div",{className:c.author,children:e.jsx("h2",{className:c.titleAuthor,children:"TRUYỆN CÙNG TÁC GIẢ"})}),r&&r.length>0&&r.map((u,f)=>e.jsxs(y,{className:c.boxItem,children:[e.jsx(Xt,{}),e.jsx(Xe,{className:c.itemName,onClick:()=>{s("/"+(u==null?void 0:u.slug))},children:u.name})]},f))]})},go=xe(()=>({box:{width:"100%",padding:"10px 20px",marginTop:"10px"},boxTitle:{width:"100%",borderBottom:"1px solid #ccc",marginBottom:"10px"},titleHotStory:{fontSize:"16px",borderBottom:"1px solid #4E4E4E",maxWidth:"235px",fontWeight:400},selectTime:{display:"flex",justifyContent:"center"},time:{width:"68px",height:"30px",borderRadius:"15px",border:"1px solid #AAA",textAlign:"center",lineHeight:"26px",marginLeft:"5px",cursor:"pointer","&:hover":{background:"#4E4E4E",color:"#fff"}},active:{background:"#4E4E4E",color:"#fff"},boxNumber:{width:"35px",height:"32px",borderRadius:"50%",border:"1px solid #eaeaea",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"5px"},boxItem:{height:"50px",display:"flex",alignItems:"center",borderBottom:"1px dashed #CCC"},boxName:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},link:{fontSize:"14px",textDecoration:"none",color:"#000"},categori:{fontSize:"11px"}})),bo=o=>{const{data:r}=o,s=go(),c=new Date,[u,f]=l.useState(c.getDate()),g=[{title:"Ngày",value:c.getDate()},{title:"Tháng",value:c.getMonth()+1},{title:"Năm",value:c.getFullYear()}],v=a=>{f(a)};return e.jsxs(y,{className:s.box,children:[e.jsx("div",{className:s.boxTitle,children:e.jsx("h2",{className:s.titleHotStory,children:"TRUYỆN ĐANG HOT"})}),e.jsx(y,{className:s.selectTime,children:g.map((a,w)=>e.jsx(y,{className:E(s.time,{[s.active]:u===a.value}),onClick:()=>v(a.value),children:a.title},w))}),r&&r.length>0&&r.map((a,w)=>e.jsxs(y,{className:s.boxItem,children:[e.jsx(y,{sx:{background:a==null?void 0:a.background,color:a==null?void 0:a.color},className:s.boxNumber,children:a.id}),e.jsxs(y,{className:s.boxName,children:[e.jsx($t,{to:"/",className:s.link,children:a.name}),e.jsx(Xe,{className:s.categori,children:a.categori})]})]}))]})},Ze=xe(()=>({boxBook:{cursor:"pointer"},imageContainer:{width:"100%",height:0,paddingBottom:"calc(322/215 * 100%)",position:"relative","& img":{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}},titleBook:{fontSeight:600,fontSize:"24px",marginBottom:"8px",color:At.MAIN_COLOR},boxIconTitle:{display:"flex",justifyContent:"flex-start",alignItems:"center","& svg":{width:"20px",marginRight:10}},boxContainer:{display:"flex",alignItems:"center",gap:5},rating:{fontSize:25},buttonRead:{textTransform:"capitalize",fontWeight:"bold"},chapter:{width:"100%",borderBottom:"1px solid #ccc",marginBottom:"15px"},titleChapter:{fontSize:"20px",borderBottom:"1px solid #4E4E4E",maxWidth:"fit-content",fontWeight:400},itemChapter:{padding:"5px 0px",textOverflow:"ellipsis"},nameChapter:{textDecoration:"none",color:"#000","&:hover":{textDecoration:"underline",cursor:"pointer"}},textEllipsis:{display:"-webkit-box",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:3,lineClamp:3}})),_o=()=>{var M;const o=Ze(),r=Wt(),[s,c]=Be.useState(!1),u=()=>{c(!s)},{rateBook:f,result:{isSuccess:g}}=Zt(),[v]=l.useState(Kt),[a,w]=l.useState([]),[I,H]=l.useState(1),R=50,z=Ye(),{data:t,refetch:B}=Jt({slug:r.slug});Ft(t==null?void 0:t.id);const[U]=Qt(),{control:oe,reset:G}=kt({defaultValues:{author:"",bookCover:"",category:{},description:"",genresList:[],id:NaN,name:"",rating:NaN,slug:"",status:"",totalChapters:NaN}}),V=l.useMemo(()=>{var i;return[{icon:Ke,title:"Tác giả",content:t==null?void 0:t.author},{icon:Ue.HashTagSvg,title:"Thể loại",content:t==null?void 0:t.genresList,template:qt},{icon:Ue.InfoCircleSvg,title:"Trạng thái",content:(i=Ht)==null?void 0:i[t==null?void 0:t.status],sx:{color:"green"}}]},[t]),Y=(i,d)=>{H(d),O(d)},O=i=>{if(t!=null&&t.chapter){const d=((t==null?void 0:t.chapter)||"").slice((i-1)*R,i*R);w(d)}},_=async i=>{const d={content:i.comment,email:i.email,commentator:i.name,bookId:t==null?void 0:t.id};try{await U(d),B()}catch(b){console.log(b)}};return l.useEffect(()=>{G(t),O(I)},[t]),e.jsxs(Be.Fragment,{children:[e.jsx(Gt,{content:t==null?void 0:t.name}),e.jsx(Yt,{children:e.jsxs(h,{container:!0,children:[e.jsx(h,{item:!0,sm:12,md:9,children:e.jsxs(h,{container:!0,children:[e.jsx(h,{xs:12,md:5,sx:{p:2,display:"flex",justifyContent:"center"},children:e.jsx("img",{src:t==null?void 0:t.bookCover,width:215,height:322,alt:"book-cover",loading:"lazy"})}),e.jsxs(h,{xs:12,md:7,sx:{p:2},children:[e.jsx("h1",{className:o.titleBook,children:t==null?void 0:t.name}),e.jsx(h,{container:!0,spacing:{xs:1,sm:2},children:V.map((i,d)=>e.jsx(To,{...i},d))}),e.jsx(y,{sx:{width:"100%",textAlign:"end"},children:e.jsx(Bt,{expand:s,onClick:u,"aria-expanded":s,"aria-label":"show more",children:e.jsx(po,{title:"Xem thêm",placement:"top-start",children:e.jsx(Ut,{})})})}),e.jsx("div",{className:E({[o.textEllipsis]:!s}),dangerouslySetInnerHTML:{__html:(t==null?void 0:t.description)+""}})]}),e.jsxs(h,{item:!0,xs:12,marginBottom:"15px",children:[e.jsx("div",{className:o.chapter,children:e.jsx("h2",{className:o.titleChapter,children:"DANH SÁCH CHƯƠNG"})}),e.jsx(h,{container:!0,marginLeft:"15px",children:(a==null?void 0:a.length)>0&&a.map((i,d)=>e.jsx(h,{item:!0,xs:6,children:e.jsx("div",{className:o.itemChapter,children:e.jsxs(zt,{onClick:()=>{z((i==null?void 0:i.slug)||"/")},className:o.nameChapter,children:["Chương ",i==null?void 0:i.chapterOrder,": ",i.name]})},d)}))}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(Dt,{count:Math.ceil((((M=t==null?void 0:t.chapter)==null?void 0:M.length)||0)/R),page:I,onChange:Y,variant:"outlined",shape:"rounded"})})]}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Vt,{data:t==null?void 0:t.comments,handleSendComment:_})})]})}),e.jsxs(h,{item:!0,xs:12,md:3,sx:{p:2},children:[e.jsx(fo,{data:t==null?void 0:t.booksByTheSameAuthor}),e.jsx(bo,{data:v})]})]})})]})},To=o=>{const{icon:r,title:s,content:c,template:u,sx:f}=o,g=Ze(),v=r;return e.jsxs(e.Fragment,{children:[e.jsxs(h,{item:!0,xs:3,className:g.boxIconTitle,children:[e.jsx(v,{}),e.jsx("div",{children:s})]}),e.jsx(h,{item:!0,xs:9,children:u?u({listGenre:c}):c})]})};export{_o as default};
