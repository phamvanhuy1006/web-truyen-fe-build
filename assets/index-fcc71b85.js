import{e as N,f as A,j as t,r as m,h as E,U as c,V as L,W as P,X as $,Y as O,Z as R,m as T,D as G,$ as M,R as B,G as v,B as C,C as S}from"./main-3faada18.js";import{B as z}from"./index-fcfe3212.js";import{C as D}from"./index-25e6887f.js";import{P as q}from"./index-a8236ec9.js";import{u as H,a as W}from"./index-1e8f73a9.js";import{a as F}from"./index-19a7c6ba.js";import"./CardHeader-690784e6.js";var y={},Q=A;Object.defineProperty(y,"__esModule",{value:!0});var h=y.default=void 0,U=Q(N()),K=t,V=(0,U.default)((0,K.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");h=y.default=V;var k={},X=A;Object.defineProperty(k,"__esModule",{value:!0});var b=k.default=void 0,Y=X(N()),Z=t,J=(0,Y.default)((0,Z.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");b=k.default=J;function I(s){const{list:o,selectedChapter:r}=s,[e,u]=m.useState(null),[a,g]=m.useState(r),x=n=>{u(n.currentTarget)},p=n=>{n.stopPropagation(),u(null)},f=E();return m.useEffect(()=>{g(r)},[r]),t.jsxs("div",{children:[t.jsx(c,{color:"red",onClick:x,label:`Chương ${(a==null?void 0:a.chapterOrder)||1}`}),t.jsx(L,{open:!!e,anchorEl:e,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:t.jsx(P,{sx:{backgroundColor:"#bb3129",color:"white",minWidth:"100px"},children:o&&(o==null?void 0:o.length)>0&&o.map((n,l)=>t.jsxs($,{onClick:j=>{p(j),f(`/${n==null?void 0:n.bookSlug}/${n==null?void 0:n.slug}`)},children:["Chương ",n==null?void 0:n.chapterOrder,": ",n==null?void 0:n.name]},l))})})]})}const ee="/assets/divider_page-0a692d51.png",_=()=>t.jsx("div",{style:{backgroundImage:`url(${ee})`,backgroundRepeat:"no-repeat",backgroundPosition:"0 -51px",backgroundColor:"white",width:"277px",height:"35px",margin:"auto"}}),te=s=>{const{data:o,...r}=H(s);return{list:o==null?void 0:o.data,meta:o==null?void 0:o.meta,...r}},oe=O.injectEndpoints({endpoints:s=>({getAllComments:s.query({query:o=>({url:R.GET_COMMENT_LIST,method:"GET",params:o})})})}),{useGetAllCommentsQuery:ne}=oe,se=s=>{const{data:o,...r}=ne(s);return{list:o==null?void 0:o.data,meta:o==null?void 0:o.meta,...r}},re=T(()=>({storyName:{fontSize:"26px",color:"green",textAlign:"center",marginTop:"10px"},storyChapter:{fontSize:"22px",color:"#000",textAlign:"center",marginTop:"10px"},button:{background:"green",color:S.WHITE,"&:hover":{background:"green",color:S.WHITE,opacity:.5}},content:{marginTop:"18px",marginBottom:"18px",textAlign:"justify","& p":{fontSize:"1.75rem",lineHeight:"30px",padding:"16px",textIndent:"50px"}}})),ge=()=>{const s=re(),o=G(),r=E(),{data:e,isLoading:u}=W({bookSlug:o.slug,slug:o.detail}),{list:a,refetch:g}=te({bookSlug:o.slug}),{list:x,refetch:p}=se({bookSlug:o.slug}),[f]=F(),n=()=>{r("/"+o.slug+"/"+(e==null?void 0:e.previousChapter))},l=()=>{r("/"+o.slug+"/"+(e==null?void 0:e.nextChapter))},j=async i=>{const d={content:i.comment,email:i.email,commentator:i.name,bookSlug:e==null?void 0:e.bookSlug};try{await f(d),g()}catch(w){console.log(w)}};return m.useEffect(()=>{const i=d=>{d.keyCode===37?n():d.keyCode===39&&l()};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[o]),u?t.jsx(M,{}):t.jsxs(B.Fragment,{children:[t.jsx(z,{preLink:`/${o.slug}`,preContent:e==null?void 0:e.bookName,content:`Chương ${e==null?void 0:e.chapterOrder}`}),t.jsx(q,{children:t.jsxs(v,{container:!0,spacing:2,children:[t.jsxs(v,{item:!0,xs:12,children:[t.jsx("div",{className:s.storyName,children:e==null?void 0:e.bookName}),t.jsxs("div",{className:s.storyChapter,children:["Chương ",e==null?void 0:e.chapterOrder,": ",e==null?void 0:e.name]}),t.jsxs(C,{display:"flex",justifyContent:"center",my:"18px",gap:"0.75rem",children:[t.jsx(c,{className:s.button,disabled:!(e!=null&&e.previousChapter),startIcon:t.jsx(h,{}),color:"red",onClick:n,children:"Chương trước"}),t.jsx(I,{list:a,selectedChapter:e}),t.jsx(c,{className:s.button,color:"red",disabled:!(e!=null&&e.nextChapter),endIcon:t.jsx(b,{}),onClick:l,children:"Chương tiếp"})]}),t.jsx(_,{}),t.jsx(C,{className:s.content,dangerouslySetInnerHTML:{__html:(e==null?void 0:e.content)||""}}),t.jsx(_,{}),t.jsxs(C,{display:"flex",justifyContent:"center",my:"18px",gap:"0.75rem",mb:"20px",children:[t.jsx(c,{className:s.button,disabled:!(e!=null&&e.previousChapter),startIcon:t.jsx(h,{}),color:"red",onClick:n,children:"Chương trước"}),t.jsx(I,{list:a,selectedChapter:e}),t.jsx(c,{className:s.button,disabled:!(e!=null&&e.nextChapter),color:"red",endIcon:t.jsx(b,{}),onClick:l,children:"Chương tiếp"})]})]}),t.jsx(v,{item:!0,xs:12,children:t.jsx(D,{data:x,handleSendComment:j})})]})})]})};export{ge as default};
