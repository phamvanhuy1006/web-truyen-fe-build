import{e as A,j as t,D as P,B as R,C as g,G as c,h as T,i as U,T as H,l as L,r as E,u as k,R as G,A as f,S as p}from"./main-9f708272.js";import{P as _}from"./index-5b080808.js";import{a as I}from"./index-9e4ddcb9.js";import{S as M,T as O}from"./SuneditorCustom-c8943400.js";import{u as v,a as y,b as B}from"./index-6e3d326c.js";import"./Stack-e76168cf.js";import"./KeyboardArrowRight-e82faa18.js";import"./Pagination-0443dad2.js";const F=l=>{const{open:u,handleClose:o,dataDetail:e,createBook:a}=l,d={name:e==null?void 0:e.name,content:e==null?void 0:e.content},{control:h,handleSubmit:m}=A({defaultValues:d,reValidateMode:"onChange",mode:"onChange"});console.log("dataDetail",e);const S=n=>{a(n)};return t.jsx(P,{open:u,maxWidth:"lg",handleClose:o,actions:[t.jsx(R,{sx:{background:g.LIGHT_GREEN,color:g.WHITE,"&:hover":{background:g.LIGHT_GREEN}},onClick:m(S),children:"Save"})],dialogTitleProps:{title:e!=null&&e.id?"Chỉnh sửa chương":"Thêm mới chương",sx:{fontSize:"18px"}},children:t.jsxs(c,{container:!0,spacing:2,children:[t.jsx(c,{item:!0,xs:12,children:t.jsx(T,{control:h,name:"name",render:({field:{onChange:n,value:r}})=>t.jsx(U,{onChange:n,value:r,title:"Tên chương"})})}),t.jsxs(c,{item:!0,xs:12,children:[t.jsx(H,{sx:{fontSize:"14px",fontWeight:"bold",color:"#544949",marginLeft:"8px",whiteSpace:"nowrap"},children:"Nội dung"}),t.jsx(T,{name:"content",control:h,render:({field:{onChange:n,value:r}})=>t.jsx(M,{onChange:n,setContents:r,height:"600px",disableSunEditor:!1,hideToolbarSunEditor:!1})})]})]})})},j={id:null,name:"",content:""},J=()=>{const l=L(),[u,o]=E.useState(!1),[e,a]=E.useState(j),[d]=v(),[h]=y();B();const{setToastInformation:m}=k(),S=async s=>{const i={...s,bookSlug:l.slug,slug:s==null?void 0:s.name.split(" ").join("-")};try{e!=null&&e.id?await h({...i,id:e==null?void 0:e.id}).unwrap().then(x=>{m({status:p.SUCCESS,message:p.SUCCESS}),C()}):await d(i).unwrap().then(x=>{m({status:p.SUCCESS,message:p.SUCCESS}),C()})}catch(x){console.log(x)}},n=s=>{o(!0),a(s)},r=()=>{o(!0),a(j)},C=()=>{o(!1),a(void 0)},b=[{Header:"STT",accessor:"chapterOrder",Cell:({row:s})=>{var i;return t.jsxs("div",{children:["Chương ",(i=s==null?void 0:s.values)==null?void 0:i.chapterOrder]})}},{Header:"Tên chương",accessor:"name"},{Header:"",accessor:"Action"}];return t.jsx(G.Fragment,{children:t.jsxs(_,{children:[t.jsx(c,{container:!0,spacing:2,children:t.jsxs(c,{item:!0,xs:12,mt:5,mb:5,children:[t.jsx(O,{title:"Quản lý chapter"}),t.jsx(I,{columns:b,data:[],onActionEdit:n,deleteUrl:f.DELETE_CHAPTER,onActionCreate:r,showPagination:!0,endpoint:f.GET_ALL_CHAPTERS,params:{bookSlug:l.slug}})]})}),u&&t.jsx(F,{open:u,handleClose:C,dataDetail:e,createBook:S})]})})};export{J as default};
