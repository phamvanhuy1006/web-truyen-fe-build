import{q as A,t as N,j as o,r as m,l as T,U as c,Z as w,$ as G,a0 as R,y as L,a1 as h,m as $,N as q,a2 as O,R as M,G as v,B as f,C as E}from"./main-cd0faa41.js";import{B}from"./index-c095300c.js";import{C as z}from"./index-0d8bc1f9.js";import{a as D,P as H}from"./index-24ed24ce.js";import"./CardHeader-43f1e55e.js";var k={},F=N;Object.defineProperty(k,"__esModule",{value:!0});var y=k.default=void 0,Q=F(A()),W=o,U=(0,Q.default)((0,W.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");y=k.default=U;var S={},K=N;Object.defineProperty(S,"__esModule",{value:!0});var b=S.default=void 0,Z=K(A()),J=o,V=(0,Z.default)((0,J.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");b=S.default=V;function _(s){const{list:t,selectedChapter:r}=s,[e,u]=m.useState(null),[a,g]=m.useState(r),x=n=>{u(n.currentTarget)},p=n=>{n.stopPropagation(),u(null)},j=T();return m.useEffect(()=>{g(r)},[r]),o.jsxs("div",{children:[o.jsx(c,{color:"red",onClick:x,label:`Chương ${(a==null?void 0:a.chapterOrder)||1}`}),o.jsx(w,{open:!!e,anchorEl:e,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:o.jsx(G,{sx:{backgroundColor:"#bb3129",color:"white",minWidth:"100px"},children:t&&(t==null?void 0:t.length)>0&&t.map((n,l)=>o.jsxs(R,{onClick:C=>{p(C),j(`/${n==null?void 0:n.bookSlug}/${n==null?void 0:n.slug}`)},children:["Chương ",n==null?void 0:n.chapterOrder,": ",n==null?void 0:n.name]},l))})})]})}const X="/assets/divider_page-0a692d51.png",I=()=>o.jsx("div",{style:{backgroundImage:`url(${X})`,backgroundRepeat:"no-repeat",backgroundPosition:"0 -51px",backgroundColor:"white",width:"277px",height:"35px",margin:"auto"}}),Y=L.injectEndpoints({endpoints:s=>({getAllChapters:s.query({query:t=>({url:h.GET_ALL_CHAPTERS,method:"GET",params:t})}),getChapter:s.query({query:t=>({url:h.GET_CHAPTER,method:"GET",params:t})})})}),{useGetChapterQuery:ee,useGetAllChaptersQuery:te}=Y,oe=s=>{const{data:t,...r}=te(s);return{list:t==null?void 0:t.data,meta:t==null?void 0:t.meta,...r}},ne=L.injectEndpoints({endpoints:s=>({getAllComments:s.query({query:t=>({url:h.GET_COMMENT_LIST,method:"GET",params:t})})})}),{useGetAllCommentsQuery:se}=ne,re=s=>{const{data:t,...r}=se(s);return{list:t==null?void 0:t.data,meta:t==null?void 0:t.meta,...r}},ae=$(()=>({storyName:{fontSize:"26px",color:"green",textAlign:"center",marginTop:"10px"},storyChapter:{fontSize:"22px",color:"#000",textAlign:"center",marginTop:"10px"},button:{background:"green",color:E.WHITE,"&:hover":{background:"green",color:E.WHITE,opacity:.5}},content:{marginTop:"18px",marginBottom:"18px",textAlign:"justify","& p":{fontSize:"1.75rem",lineHeight:"30px",padding:"16px",textIndent:"50px"}}})),me=()=>{const s=ae(),t=q(),r=T(),{data:e,isLoading:u}=ee({bookSlug:t.slug,slug:t.detail}),{list:a,refetch:g}=oe({bookSlug:t.slug}),{list:x,refetch:p}=re({bookSlug:t.slug}),[j]=D(),n=()=>{r("/"+t.slug+"/"+(e==null?void 0:e.previousChapter))},l=()=>{r("/"+t.slug+"/"+(e==null?void 0:e.nextChapter))},C=async i=>{const d={content:i.comment,email:i.email,commentator:i.name,bookSlug:e==null?void 0:e.bookSlug};try{await j(d),g()}catch(P){console.log(P)}};return m.useEffect(()=>{const i=d=>{d.keyCode===37?n():d.keyCode===39&&l()};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[t]),u?o.jsx(O,{}):o.jsxs(M.Fragment,{children:[o.jsx(B,{preLink:`/${t.slug}`,preContent:e==null?void 0:e.bookName,content:`Chương ${e==null?void 0:e.chapterOrder}`}),o.jsx(H,{children:o.jsxs(v,{container:!0,spacing:2,children:[o.jsxs(v,{item:!0,xs:12,children:[o.jsx("div",{className:s.storyName,children:e==null?void 0:e.bookName}),o.jsxs("div",{className:s.storyChapter,children:["Chương ",e==null?void 0:e.chapterOrder,": ",e==null?void 0:e.name]}),o.jsxs(f,{display:"flex",justifyContent:"center",my:"18px",gap:"0.75rem",children:[o.jsx(c,{className:s.button,disabled:!(e!=null&&e.previousChapter),startIcon:o.jsx(y,{}),color:"red",onClick:n,children:"Chương trước"}),o.jsx(_,{list:a,selectedChapter:e}),o.jsx(c,{className:s.button,color:"red",disabled:!(e!=null&&e.nextChapter),endIcon:o.jsx(b,{}),onClick:l,children:"Chương tiếp"})]}),o.jsx(I,{}),o.jsx(f,{className:s.content,dangerouslySetInnerHTML:{__html:(e==null?void 0:e.content)||""}}),o.jsx(I,{}),o.jsxs(f,{display:"flex",justifyContent:"center",my:"18px",gap:"0.75rem",mb:"20px",children:[o.jsx(c,{className:s.button,disabled:!(e!=null&&e.previousChapter),startIcon:o.jsx(y,{}),color:"red",onClick:n,children:"Chương trước"}),o.jsx(_,{list:a,selectedChapter:e}),o.jsx(c,{className:s.button,disabled:!(e!=null&&e.nextChapter),color:"red",endIcon:o.jsx(b,{}),onClick:l,children:"Chương tiếp"})]})]}),o.jsx(v,{item:!0,xs:12,children:o.jsx(z,{data:x,handleSendComment:C})})]})})]})};export{me as default};
