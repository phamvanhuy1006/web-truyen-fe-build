import{H as A,J as N,j as t,r as m,a as E,B as c,aw as L,a6 as P,aq as O,b as R,A as T,s as $,l as G,bf as M,R as B,G as v,f as C,C as S}from"./main-b898a6f9.js";import{B as q}from"./index-5eeecf12.js";import{C as z}from"./index-3f3f5b6d.js";import{P as D}from"./index-e610107a.js";import{c as H,d as F}from"./index-65fdec2c.js";import{c as Q}from"./index-b196da4b.js";import"./CardHeader-2be6db8d.js";var y={},W=N;Object.defineProperty(y,"__esModule",{value:!0});var b=y.default=void 0,J=W(A()),K=t,U=(0,J.default)((0,K.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");b=y.default=U;var k={},V=N;Object.defineProperty(k,"__esModule",{value:!0});var h=k.default=void 0,X=V(A()),Y=t,Z=(0,X.default)((0,Y.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");h=k.default=Z;function I(s){const{list:o,selectedChapter:r}=s,[e,u]=m.useState(null),[a,g]=m.useState(r),x=n=>{u(n.currentTarget)},p=n=>{n.stopPropagation(),u(null)},f=E();return m.useEffect(()=>{g(r)},[r]),t.jsxs("div",{children:[t.jsx(c,{color:"red",onClick:x,label:`Chương ${(a==null?void 0:a.chapterOrder)||1}`}),t.jsx(L,{open:!!e,anchorEl:e,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:t.jsx(P,{sx:{backgroundColor:"#bb3129",color:"white",minWidth:"100px"},children:o&&(o==null?void 0:o.length)>0&&o.map((n,l)=>t.jsxs(O,{onClick:j=>{p(j),f(`/${n==null?void 0:n.bookSlug}/${n==null?void 0:n.slug}`)},children:["Chương ",n==null?void 0:n.chapterOrder,": ",n==null?void 0:n.name]},l))})})]})}const ee="/assets/divider_page-0a692d51.png",_=()=>t.jsx("div",{style:{backgroundImage:`url(${ee})`,backgroundRepeat:"no-repeat",backgroundPosition:"0 -51px",backgroundColor:"white",width:"277px",height:"35px",margin:"auto"}}),te=s=>{const{data:o,...r}=H(s);return{list:o==null?void 0:o.data,meta:o==null?void 0:o.meta,...r}},oe=R.injectEndpoints({endpoints:s=>({getAllComments:s.query({query:o=>({url:T.GET_COMMENT_LIST,method:"GET",params:o})})})}),{useGetAllCommentsQuery:ne}=oe,se=s=>{const{data:o,...r}=ne(s);return{list:o==null?void 0:o.data,meta:o==null?void 0:o.meta,...r}},re=$(()=>({storyName:{fontSize:"26px",color:"green",textAlign:"center",marginTop:"10px"},storyChapter:{fontSize:"22px",color:"#000",textAlign:"center",marginTop:"10px"},button:{background:"green",color:S.WHITE,"&:hover":{background:"green",color:S.WHITE,opacity:.5}},content:{marginTop:"18px",marginBottom:"18px",textAlign:"justify","& *":{userSelect:"none"},"& p":{fontSize:"1.75rem",lineHeight:"30px",padding:"16px",textIndent:"50px"}}})),ge=()=>{const s=re(),o=G(),r=E(),{data:e,isLoading:u}=F({bookSlug:o.slug,slug:o.detail}),{list:a,refetch:g}=te({bookSlug:o.slug}),{list:x,refetch:p}=se({bookSlug:o.slug}),[f]=Q(),n=()=>{r("/"+o.slug+"/"+(e==null?void 0:e.previousChapter))},l=()=>{r("/"+o.slug+"/"+(e==null?void 0:e.nextChapter))},j=async i=>{const d={content:i.comment,email:i.email,commentator:i.name,bookSlug:e==null?void 0:e.bookSlug};try{await f(d),g()}catch(w){console.log(w)}};return m.useEffect(()=>{const i=d=>{d.keyCode===37?n():d.keyCode===39&&l()};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[o]),u?t.jsx(M,{}):t.jsxs(B.Fragment,{children:[t.jsx(q,{preLink:`/${o.slug}`,preContent:e==null?void 0:e.bookName,content:`Chương ${e==null?void 0:e.chapterOrder}`}),t.jsx(D,{children:t.jsxs(v,{container:!0,spacing:2,children:[t.jsxs(v,{item:!0,xs:12,children:[t.jsx("div",{className:s.storyName,children:e==null?void 0:e.bookName}),t.jsxs("div",{className:s.storyChapter,children:["Chương ",e==null?void 0:e.chapterOrder,": ",e==null?void 0:e.name]}),t.jsxs(C,{display:"flex",justifyContent:"center",my:"18px",gap:"0.75rem",children:[t.jsx(c,{className:s.button,disabled:!(e!=null&&e.previousChapter),startIcon:t.jsx(b,{}),color:"red",onClick:n,children:"Chương trước"}),t.jsx(I,{list:a,selectedChapter:e}),t.jsx(c,{className:s.button,color:"red",disabled:!(e!=null&&e.nextChapter),endIcon:t.jsx(h,{}),onClick:l,children:"Chương tiếp"})]}),t.jsx(_,{}),t.jsx(C,{className:s.content,dangerouslySetInnerHTML:{__html:(e==null?void 0:e.content)||""}}),t.jsx(_,{}),t.jsxs(C,{display:"flex",justifyContent:"center",my:"18px",gap:"0.75rem",mb:"20px",children:[t.jsx(c,{className:s.button,disabled:!(e!=null&&e.previousChapter),startIcon:t.jsx(b,{}),color:"red",onClick:n,children:"Chương trước"}),t.jsx(I,{list:a,selectedChapter:e}),t.jsx(c,{className:s.button,disabled:!(e!=null&&e.nextChapter),color:"red",endIcon:t.jsx(h,{}),onClick:l,children:"Chương tiếp"})]})]}),t.jsx(v,{item:!0,xs:12,children:t.jsx(z,{data:x,handleSendComment:j})})]})})]})};export{ge as default};
