import{l as P,j as t,ac as R,U,C as g,G as c,n as T,a1 as A,T as H,D as L,r as E,a9 as k,R as G,Z as f,aa as m}from"./main-3faada18.js";import{P as _}from"./index-a8236ec9.js";import{a as I}from"./index-a2438136.js";import{S as M,T as O}from"./SuneditorCustom-51d0d3b2.js";import{b as v,c as y,d as F}from"./index-1e8f73a9.js";import"./Stack-746ab797.js";import"./KeyboardArrowRight-e6502fcd.js";import"./Pagination-da5528c3.js";const B=l=>{const{open:u,handleClose:o,dataDetail:e,createBook:a}=l,p={name:e==null?void 0:e.name,content:e==null?void 0:e.content},{control:d,handleSubmit:h}=P({defaultValues:p,reValidateMode:"onChange",mode:"onChange"});console.log("dataDetail",e);const S=s=>{a(s)};return t.jsx(R,{open:u,maxWidth:"lg",handleClose:o,actions:[t.jsx(U,{sx:{background:g.LIGHT_GREEN,color:g.WHITE,"&:hover":{background:g.LIGHT_GREEN}},onClick:h(S),children:"Save"})],dialogTitleProps:{title:e!=null&&e.id?"Chỉnh sửa chương":"Thêm mới chương",sx:{fontSize:"18px"}},children:t.jsxs(c,{container:!0,spacing:2,children:[t.jsx(c,{item:!0,xs:12,children:t.jsx(T,{control:d,name:"name",render:({field:{onChange:s,value:r}})=>t.jsx(A,{onChange:s,value:r,title:"Tên chương"})})}),t.jsxs(c,{item:!0,xs:12,children:[t.jsx(H,{sx:{fontSize:"14px",fontWeight:"bold",color:"#544949",marginLeft:"8px",whiteSpace:"nowrap"},children:"Nội dung"}),t.jsx(T,{name:"content",control:d,render:({field:{onChange:s,value:r}})=>t.jsx(M,{onChange:s,setContents:r,height:"600px",disableSunEditor:!1,hideToolbarSunEditor:!1})})]})]})})},j={id:null,name:"",content:""},D=()=>{const l=L(),[u,o]=E.useState(!1),[e,a]=E.useState(j),[p]=v(),[d]=y();F();const{setToastInformation:h}=k(),S=async n=>{const i={...n,bookSlug:l.slug,slug:n==null?void 0:n.name.split(" ").join("-")};try{e!=null&&e.id?await d({...i,id:e==null?void 0:e.id}).unwrap().then(x=>{h({status:m.SUCCESS,message:m.SUCCESS}),C()}):await p(i).unwrap().then(x=>{h({status:m.SUCCESS,message:m.SUCCESS}),C()})}catch(x){console.log(x)}},s=n=>{o(!0),a(n)},r=()=>{o(!0),a(j)},C=()=>{o(!1),a(void 0)},b=[{Header:"STT",accessor:"chapterOrder",Cell:({row:n})=>{var i;return t.jsxs("div",{children:["Chương ",(i=n==null?void 0:n.values)==null?void 0:i.chapterOrder]})}},{Header:"Tên chương",accessor:"name"},{Header:"",accessor:"Action"}];return t.jsx(G.Fragment,{children:t.jsxs(_,{children:[t.jsx(c,{container:!0,spacing:2,children:t.jsxs(c,{item:!0,xs:12,mt:5,mb:5,children:[t.jsx(O,{title:"Quản lý chapter"}),t.jsx(I,{columns:b,data:[],onActionEdit:s,deleteUrl:f.DELETE_CHAPTER,onActionCreate:r,showPagination:!0,endpoint:f.GET_ALL_CHAPTERS,params:{bookSlug:l.slug}})]})}),u&&t.jsx(B,{open:u,handleClose:C,dataDetail:e,createBook:S})]})})};export{D as default};
