import{m as ce,j as o,a as K,b as J,s as N,_ as u,r as j,p as Z,c as W,t as L,f as D,E as ye,q as k,N as be,aP as _e,C as je,v as ke,n as Be,aQ as Ue,u as qe,as as We,i as Ge,aF as Ye,I as Xe,aR as Qe,aa as de,ay as Se,G as v,az as ne,av as re,aH as le,ab as Re,ac as we,ae as te,aS as Ke,aT as Je,aI as oe,aU as Ze,R as De}from"./main-e476a63a.js";import{B as et,P as tt,L as ot}from"./index-fd868624.js";import{d as nt,G as st}from"./index-c6b6891b.js";import{H as at,T as rt}from"./index-d3fcd8a0.js";import{a as it,b as lt,c as ct,P as dt}from"./index-a4eeefe8.js";const ut={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},mt=ut,pt=ce(o.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function ht(t){return K("MuiAvatar",t)}J("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const ft=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],gt=t=>{const{classes:e,variant:s,colorDefault:a}=t;return D({root:["root",s,a&&"colorDefault"],img:["img"],fallback:["fallback"]},ht,e)},xt=N("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[s.variant],s.colorDefault&&e.colorDefault]}})(({theme:t,ownerState:e})=>u({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},e.variant==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius},e.variant==="square"&&{borderRadius:0},e.colorDefault&&u({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600]}))),vt=N("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(t,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Ct=N(pt,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(t,e)=>e.fallback})({width:"75%",height:"75%"});function yt({crossOrigin:t,referrerPolicy:e,src:s,srcSet:a}){const[l,r]=j.useState(!1);return j.useEffect(()=>{if(!s&&!a)return;r(!1);let c=!0;const i=new Image;return i.onload=()=>{c&&r("loaded")},i.onerror=()=>{c&&r("error")},i.crossOrigin=t,i.referrerPolicy=e,i.src=s,a&&(i.srcset=a),()=>{c=!1}},[t,e,s,a]),l}const bt=j.forwardRef(function(e,s){const a=Z({props:e,name:"MuiAvatar"}),{alt:l,children:r,className:c,component:i="div",imgProps:m,sizes:p,src:w,srcSet:f,variant:n="circular"}=a,M=W(a,ft);let x=null;const C=yt(u({},m,{src:w,srcSet:f})),y=w||f,R=y&&C!=="error",F=u({},a,{colorDefault:!R,component:i,variant:n}),g=gt(F);return R?x=o.jsx(vt,u({alt:l,src:w,srcSet:f,sizes:p,ownerState:F,className:g.img},m)):r!=null?x=r:y&&l?x=l[0]:x=o.jsx(Ct,{ownerState:F,className:g.fallback}),o.jsx(xt,u({as:i,ownerState:F,className:L(g.root,c),ref:s},M,{children:x}))}),jt=bt;function St(t){return K("MuiCard",t)}J("MuiCard",["root"]);const Rt=["className","raised"],wt=t=>{const{classes:e}=t;return D({root:["root"]},St,e)},Mt=N(ye,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Nt=j.forwardRef(function(e,s){const a=Z({props:e,name:"MuiCard"}),{className:l,raised:r=!1}=a,c=W(a,Rt),i=u({},a,{raised:r}),m=wt(i);return o.jsx(Mt,u({className:L(m.root,l),elevation:r?8:void 0,ref:s,ownerState:i},c))}),At=Nt;function Ft(t){return K("MuiCardContent",t)}J("MuiCardContent",["root"]);const Ht=["className","component"],Tt=t=>{const{classes:e}=t;return D({root:["root"]},Ft,e)},It=N("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),$t=j.forwardRef(function(e,s){const a=Z({props:e,name:"MuiCardContent"}),{className:l,component:r="div"}=a,c=W(a,Ht),i=u({},a,{component:r}),m=Tt(i);return o.jsx(It,u({as:r,className:L(m.root,l),ownerState:i,ref:s},c))}),zt=$t;function Pt(t){return K("MuiCardHeader",t)}const Vt=J("MuiCardHeader",["root","avatar","action","content","title","subheader"]),xe=Vt,Et=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Lt=t=>{const{classes:e}=t;return D({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Pt,e)},Ot=N("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>u({[`& .${xe.title}`]:e.title,[`& .${xe.subheader}`]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),_t=N("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),kt=N("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Bt=N("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"}),Ut=j.forwardRef(function(e,s){const a=Z({props:e,name:"MuiCardHeader"}),{action:l,avatar:r,className:c,component:i="div",disableTypography:m=!1,subheader:p,subheaderTypographyProps:w,title:f,titleTypographyProps:n}=a,M=W(a,Et),x=u({},a,{component:i,disableTypography:m}),C=Lt(x);let y=f;y!=null&&y.type!==k&&!m&&(y=o.jsx(k,u({variant:r?"body2":"h5",className:C.title,component:"span",display:"block"},n,{children:y})));let R=p;return R!=null&&R.type!==k&&!m&&(R=o.jsx(k,u({variant:r?"body2":"body1",className:C.subheader,color:"text.secondary",component:"span",display:"block"},w,{children:R}))),o.jsxs(Ot,u({className:L(C.root,c),as:i,ref:s,ownerState:x},M,{children:[r&&o.jsx(_t,{className:C.avatar,ownerState:x,children:r}),o.jsxs(Bt,{className:C.content,ownerState:x,children:[y,R]}),l&&o.jsx(kt,{className:C.action,ownerState:x,children:l})]}))}),qt=Ut,Wt=ce(o.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),Gt=ce(o.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function Yt(t){return K("MuiRating",t)}const Xt=J("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),Q=Xt,Qt=["value"],Kt=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function Jt(t,e,s){return t<e?e:t>s?s:t}function Zt(t){const e=t.toString().split(".")[1];return e?e.length:0}function ie(t,e){if(t==null)return t;const s=Math.round(t/e)*e;return Number(s.toFixed(Zt(e)))}const Dt=t=>{const{classes:e,size:s,readOnly:a,disabled:l,emptyValueFocused:r,focusVisible:c}=t,i={root:["root",`size${be(s)}`,l&&"disabled",c&&"focusVisible",a&&"readOnly"],label:["label","pristine"],labelEmptyValue:[r&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return D(i,Yt,e)},eo=N("span",{name:"MuiRating",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[{[`& .${Q.visuallyHidden}`]:e.visuallyHidden},e.root,e[`size${be(s.size)}`],s.readOnly&&e.readOnly]}})(({theme:t,ownerState:e})=>u({display:"inline-flex",position:"relative",fontSize:t.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent",[`&.${Q.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Q.focusVisible} .${Q.iconActive}`]:{outline:"1px solid #999"},[`& .${Q.visuallyHidden}`]:mt},e.size==="small"&&{fontSize:t.typography.pxToRem(18)},e.size==="large"&&{fontSize:t.typography.pxToRem(30)},e.readOnly&&{pointerEvents:"none"})),Me=N("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:t},e)=>[e.label,t.emptyValueFocused&&e.labelEmptyValueActive]})(({ownerState:t})=>u({cursor:"inherit"},t.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),to=N("span",{name:"MuiRating",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.icon,s.iconEmpty&&e.iconEmpty,s.iconFilled&&e.iconFilled,s.iconHover&&e.iconHover,s.iconFocus&&e.iconFocus,s.iconActive&&e.iconActive]}})(({theme:t,ownerState:e})=>u({display:"flex",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),pointerEvents:"none"},e.iconActive&&{transform:"scale(1.2)"},e.iconEmpty&&{color:(t.vars||t).palette.action.disabled})),oo=N("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:t=>_e(t)&&t!=="iconActive",overridesResolver:(t,e)=>{const{iconActive:s}=t;return[e.decimal,s&&e.iconActive]}})(({iconActive:t})=>u({position:"relative"},t&&{transform:"scale(1.2)"}));function no(t){const e=W(t,Qt);return o.jsx("span",u({},e))}function ve(t){const{classes:e,disabled:s,emptyIcon:a,focus:l,getLabelText:r,highlightSelectedOnly:c,hover:i,icon:m,IconContainerComponent:p,isActive:w,itemValue:f,labelProps:n,name:M,onBlur:x,onChange:C,onClick:y,onFocus:R,readOnly:F,ownerState:g,ratingValue:A,ratingValueRounded:G}=t,$=c?f===A:f<=A,O=f<=i,d=f<=l,S=f===G,z=je(),P=o.jsx(to,{as:p,value:f,className:L(e.icon,$?e.iconFilled:e.iconEmpty,O&&e.iconHover,d&&e.iconFocus,w&&e.iconActive),ownerState:u({},g,{iconEmpty:!$,iconFilled:$,iconHover:O,iconFocus:d,iconActive:w}),children:a&&!$?a:m});return F?o.jsx("span",u({},n,{children:P})):o.jsxs(j.Fragment,{children:[o.jsxs(Me,u({ownerState:u({},g,{emptyValueFocused:void 0}),htmlFor:z},n,{children:[P,o.jsx("span",{className:e.visuallyHidden,children:r(f)})]})),o.jsx("input",{className:e.visuallyHidden,onFocus:R,onBlur:x,onChange:C,onClick:y,disabled:s,value:f,id:z,type:"radio",name:M,checked:S})]})}const so=o.jsx(Wt,{fontSize:"inherit"}),ao=o.jsx(Gt,{fontSize:"inherit"});function ro(t){return`${t} Star${t!==1?"s":""}`}const io=j.forwardRef(function(e,s){const a=Z({name:"MuiRating",props:e}),{className:l,defaultValue:r=null,disabled:c=!1,emptyIcon:i=ao,emptyLabelText:m="Empty",getLabelText:p=ro,highlightSelectedOnly:w=!1,icon:f=so,IconContainerComponent:n=no,max:M=5,name:x,onChange:C,onChangeActive:y,onMouseLeave:R,onMouseMove:F,precision:g=1,readOnly:A=!1,size:G="medium",value:$}=a,O=W(a,Kt),d=je(x),[S,z]=ke({controlled:$,default:r,name:"Rating"}),P=ie(S,g),me=Be(),[{hover:H,focus:V},Y]=j.useState({hover:-1,focus:-1});let B=P;H!==-1&&(B=H),V!==-1&&(B=V);const{isFocusVisibleRef:pe,onBlur:Fe,onFocus:He,ref:Te}=Ue(),[Ie,se]=j.useState(!1),he=j.useRef(),$e=qe(Te,he,s),ze=h=>{F&&F(h);const b=he.current,{right:T,left:ee}=b.getBoundingClientRect(),{width:U}=b.firstChild.getBoundingClientRect();let q;me.direction==="rtl"?q=(T-h.clientX)/(U*M):q=(h.clientX-ee)/(U*M);let I=ie(M*q+g/2,g);I=Jt(I,g,M),Y(_=>_.hover===I&&_.focus===I?_:{hover:I,focus:I}),se(!1),y&&H!==I&&y(h,I)},Pe=h=>{R&&R(h);const b=-1;Y({hover:b,focus:b}),y&&H!==b&&y(h,b)},fe=h=>{let b=h.target.value===""?null:parseFloat(h.target.value);H!==-1&&(b=H),z(b),C&&C(h,b)},Ve=h=>{h.clientX===0&&h.clientY===0||(Y({hover:-1,focus:-1}),z(null),C&&parseFloat(h.target.value)===P&&C(h,null))},Ee=h=>{He(h),pe.current===!0&&se(!0);const b=parseFloat(h.target.value);Y(T=>({hover:T.hover,focus:b}))},Le=h=>{if(H!==-1)return;Fe(h),pe.current===!1&&se(!1);const b=-1;Y(T=>({hover:T.hover,focus:b}))},[Oe,ge]=j.useState(!1),X=u({},a,{defaultValue:r,disabled:c,emptyIcon:i,emptyLabelText:m,emptyValueFocused:Oe,focusVisible:Ie,getLabelText:p,icon:f,IconContainerComponent:n,max:M,precision:g,readOnly:A,size:G}),E=Dt(X);return o.jsxs(eo,u({ref:$e,onMouseMove:ze,onMouseLeave:Pe,className:L(E.root,l,A&&"MuiRating-readOnly"),ownerState:X,role:A?"img":null,"aria-label":A?p(B):null},O,{children:[Array.from(new Array(M)).map((h,b)=>{const T=b+1,ee={classes:E,disabled:c,emptyIcon:i,focus:V,getLabelText:p,highlightSelectedOnly:w,hover:H,icon:f,IconContainerComponent:n,name:d,onBlur:Le,onChange:fe,onClick:Ve,onFocus:Ee,ratingValue:B,ratingValueRounded:P,readOnly:A,ownerState:X},U=T===Math.ceil(B)&&(H!==-1||V!==-1);if(g<1){const q=Array.from(new Array(1/g));return o.jsx(oo,{className:L(E.decimal,U&&E.iconActive),ownerState:X,iconActive:U,children:q.map((I,_)=>{const ae=ie(T-1+(_+1)*g,g);return o.jsx(ve,u({},ee,{isActive:!1,itemValue:ae,labelProps:{style:q.length-1===_?{}:{width:ae===B?`${(_+1)*g*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),ae)})},T)}return o.jsx(ve,u({},ee,{isActive:U,itemValue:T}),T)}),!A&&!c&&o.jsxs(Me,{className:L(E.label,E.labelEmptyValue),ownerState:X,children:[o.jsx("input",{className:E.visuallyHidden,value:"",id:`${d}-empty`,type:"radio",name:d,checked:P==null,onFocus:()=>ge(!0),onBlur:()=>ge(!1),onChange:fe}),o.jsx("span",{className:E.visuallyHidden,children:m})]})]}))}),lo=io;var ue={},co=Ge;Object.defineProperty(ue,"__esModule",{value:!0});var Ne=ue.default=void 0,uo=co(We()),mo=o,po=(0,uo.default)((0,mo.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonSharp");Ne=ue.default=po;const ho="/assets/bookCover-6a99e947.png";function Ce(t,e){return t===1?`${t} ${e}`:`${t} ${e}s`}function fo(t,e){const s=t.getTime(),l=e.getTime()-s,r=Math.floor(l/(1e3*60));if(r===0)return"now";if(r<=60)return Ce(r,"minute");if(r<=24*60){const c=Math.floor(r/60);return Ce(c,"hour")}else return Ye(t).format("MMMM DD, YYYY")}N(t=>{const{expand:e,...s}=t;return o.jsx(Xe,{...s})})(({theme:t,expand:e})=>({transform:e?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}));function go(t){const{comment:e}=t;return o.jsxs(At,{children:[o.jsx(qt,{avatar:o.jsx(jt,{sx:{bgcolor:Qe[500]},"aria-label":"recipe"}),title:o.jsx("span",{style:{textTransform:"capitalize"},children:e==null?void 0:e.commentator}),subheader:fo(new Date(e==null?void 0:e.created_at),new Date)}),o.jsx(zt,{sx:{pt:0},children:o.jsx(k,{variant:"body2",color:"text.secondary",children:e==null?void 0:e.content})})]})}const xo=de(()=>({rootContainer:{marginBottom:"20px"},titleComponent:{width:"100%",borderBottom:"1px solid #ccc",marginBottom:"15px"},title:{fontSize:"20px",borderBottom:"1px solid #4E4E4E",maxWidth:"fit-content",fontWeight:400}})),vo=t=>{const{data:e,handleSendComment:s}=t,a=xo(),{control:l,handleSubmit:r}=Se({reValidateMode:"onChange"}),c=i=>{s(i)};return o.jsxs(ye,{className:a.rootContainer,sx:{py:"1rem",px:"1.5rem"},children:[o.jsx("div",{className:a.titleComponent,children:o.jsx("h2",{className:a.title,children:"Bình luận"})}),o.jsx(k,{sx:{fontSize:"18px",fontWeight:"bold"},children:"Trả lời"}),o.jsxs(v,{container:!0,spacing:1.5,children:[o.jsx(v,{item:!0,xs:12,children:o.jsx(ne,{name:"comment",control:l,rules:{required:{value:!0,message:"This field is required."}},render:({field:{onChange:i,value:m},fieldState:{error:p}})=>o.jsx(re,{title:"Comment",multiline:!0,onChange:i,value:m,errorMessage:p==null?void 0:p.message,minRows:4,placeholder:"Comment"})})}),o.jsx(v,{item:!0,xs:6,sx:{marginTop:1},children:o.jsx(ne,{control:l,name:"name",rules:{required:{value:!0,message:"This field is required."}},render:({field:{onChange:i,value:m},fieldState:{error:p}})=>o.jsx(re,{title:"Name",isRequired:!0,onChange:i,value:m,errorMessage:p==null?void 0:p.message,placeholder:"Comment"})})}),o.jsx(v,{item:!0,xs:6,sx:{marginTop:1},children:o.jsx(ne,{control:l,name:"email",rules:{required:{value:!0,message:"This field is required."}},render:({field:{onChange:i,value:m},fieldState:{error:p}})=>o.jsx(re,{title:"Email",isRequired:!0,onChange:i,value:m,errorMessage:p==null?void 0:p.message,placeholder:"Email"})})}),o.jsx(v,{item:!0,xs:12,sx:{textAlign:"end"},children:o.jsx(le,{color:"warning",onClick:r(c),children:"Phản hồi"})})]}),o.jsx("div",{style:{marginBottom:"5px",marginTop:"10px"},children:e&&e.map((i,m)=>o.jsx(go,{comment:i}))})]})},Co=()=>{const[t,e]=it();return{rateBook:async({bookId:a,point:l})=>{const r=await t({bookId:a,point:l});return r&&localStorage.setItem(`rating-${a}`,`${a}`),r==null?void 0:r.data},result:e}},yo=de(()=>({box:{width:"100%",maxHeight:"400px",minHeight:"370px",background:"#ecf0f1",padding:"10px 20px"},author:{width:"100%",borderBottom:"1px solid #ccc",marginBottom:"10px"},titleAuthor:{fontSize:"16px",borderBottom:"1px solid #4E4E4E",maxWidth:"235px",fontWeight:400},boxItem:{height:"40px",display:"flex",alignItems:"center",borderBottom:"1px dashed #CCC"},itemName:{width:"100%",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textDecoration:"none",color:"#000",cursor:"pointer"}})),bo=t=>{const{data:e}=t,s=Re(),a=yo();return o.jsxs("div",{className:a.box,children:[o.jsx("div",{className:a.author,children:o.jsx("h2",{className:a.titleAuthor,children:"TRUYỆN CÙNG TÁC GIẢ"})}),e&&e.length>0&&e.map((l,r)=>o.jsxs(we,{className:a.boxItem,children:[o.jsx(nt,{}),o.jsx(k,{className:a.itemName,onClick:()=>{s("/"+(l==null?void 0:l.slug))},children:l.name})]},r))]})},Ae=de(()=>({boxBook:{cursor:"pointer"},imageContainer:{width:"100%",height:0,paddingBottom:"calc(322/215 * 100%)",position:"relative","& img":{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}},titleBook:{fontSeight:600,fontSize:"24px",color:te.MAIN_COLOR},boxIconTitle:{display:"flex",justifyContent:"flex-start",alignItems:"center","& svg":{width:"20px",marginRight:10}},boxContainer:{display:"flex",alignItems:"center",gap:5},rating:{fontSize:25},buttonRead:{backgroundColor:te.MAIN_COLOR,color:te.WHITE,textTransform:"capitalize",fontWeight:"bold","&:hover":{backgroundColor:te.MAIN_COLOR,opacity:.8}},chapter:{width:"100%",borderBottom:"1px solid #ccc",marginBottom:"15px"},titleChapter:{fontSize:"20px",borderBottom:"1px solid #4E4E4E",maxWidth:"fit-content",fontWeight:400},itemChapter:{padding:"5px 0px",textOverflow:"ellipsis"},nameChapter:{textDecoration:"none",color:"#000","&:hover":{textDecoration:"underline",cursor:"pointer"}}})),Ao=t=>{var O;const e=Ae(),s=Ke(),{rateBook:a,result:{isSuccess:l}}=Co(),[r]=j.useState(at),[c,i]=j.useState([]),[m,p]=j.useState(1),w=50,f=Re(),{data:n,refetch:M}=lt({slug:s.slug}),x=Je(n==null?void 0:n.id)||l,[C]=ct(),{control:y,reset:R}=Se({defaultValues:{author:"",bookCover:"",category:{},description:"",genresList:[],id:NaN,name:"",rating:NaN,slug:"",status:"",totalChapters:NaN}}),F=j.useMemo(()=>{var d;return[{icon:Ne,title:"Tác giả",content:n==null?void 0:n.author},{icon:oe.HashTagSvg,title:"Thể loại",content:n==null?void 0:n.genresList,template:st},{icon:oe.InfoCircleSvg,title:"Trạng thái",content:(d=Ze)==null?void 0:d[n==null?void 0:n.status],sx:{color:"green"}},{icon:oe.TagsSvg,title:"Số chương",content:n==null?void 0:n.totalChapters},{icon:oe.AwardSvg,title:"Chất lượng",content:`Bản Dịch đến chương ${n==null?void 0:n.totalChapters}`}]},[n]),g=(d,S)=>{p(S),A(S)},A=d=>{if(n!=null&&n.chapter){const S=(n==null?void 0:n.chapter).slice((d-1)*w,d*w);i(S)}},G=()=>{f("/"+s.slug+"/1")},$=async d=>{const S={content:d.comment,email:d.email,commentator:d.name,bookId:n==null?void 0:n.id};try{await C(S),M()}catch(z){console.log(z)}};return j.useEffect(()=>{R(n),A(m)},[n]),o.jsxs(De.Fragment,{children:[o.jsx(et,{content:n==null?void 0:n.name}),o.jsx(tt,{children:o.jsxs(v,{container:!0,children:[o.jsx(v,{item:!0,sm:12,md:9,children:o.jsxs(v,{container:!0,children:[o.jsx(v,{xs:12,md:5,sx:{p:2,display:"flex",justifyContent:"center"},children:o.jsx("img",{src:ho,width:215,height:322,alt:"book-cover",loading:"lazy"})}),o.jsxs(v,{xs:12,md:7,sx:{p:2,display:"flex",flexDirection:"column",justifyContent:"space-around"},children:[o.jsx("h1",{className:e.titleBook,children:n==null?void 0:n.name}),o.jsx(v,{container:!0,spacing:2,children:F.map((d,S)=>o.jsx(jo,{...d},S))}),o.jsxs(we,{className:e.boxContainer,sx:{flexDirection:{sm:"row",xs:"column"}},children:[o.jsx(ne,{control:y,name:"rating",render:({field:{onChange:d,value:S,ref:z},fieldState:{error:P}})=>o.jsx(lo,{max:10,disabled:x,precision:.5,onChange:async(me,H)=>{const V=await a({bookId:n==null?void 0:n.id,point:H});d(V==null?void 0:V.ratingPoint)},value:S,classes:{icon:e.rating}})}),x&&"Cảm ơn bạn đã đánh giá!"]}),o.jsxs("div",{className:e.boxContainer,children:[o.jsx(le,{className:e.buttonRead,label:"Đọc từ đầu",variant:"contained",onClick:G}),o.jsx(le,{className:e.buttonRead,label:"Đọc Mới Nhất",variant:"contained"})]})]}),o.jsxs(v,{item:!0,xs:12,marginBottom:"15px",children:[o.jsx("div",{className:e.chapter,children:o.jsx("h2",{className:e.titleChapter,children:"DANH SÁCH CHƯƠNG"})}),o.jsx(v,{container:!0,marginLeft:"15px",children:(c==null?void 0:c.length)>0&&c.map((d,S)=>o.jsx(v,{item:!0,xs:6,children:o.jsx("div",{className:e.itemChapter,children:o.jsxs(ot,{onClick:()=>{f((d==null?void 0:d.slug)||"/")},className:e.nameChapter,children:["Chương ",d==null?void 0:d.chapterOrder,": ",d.name]})},S)}))}),o.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:o.jsx(dt,{count:Math.ceil(((O=n==null?void 0:n.chapter)==null?void 0:O.length)||0/w),page:m-1,onChange:g,variant:"outlined",shape:"rounded"})})]}),o.jsx(v,{item:!0,xs:12,children:o.jsx(vo,{data:n==null?void 0:n.comments,handleSendComment:$})})]})}),o.jsxs(v,{item:!0,xs:12,md:3,sx:{p:2},children:[o.jsx(bo,{data:n==null?void 0:n.booksByTheSameAuthor}),o.jsx(rt,{data:r})]})]})})]})},jo=t=>{const{icon:e,title:s,content:a,template:l,sx:r}=t,c=Ae(),i=e;return o.jsxs(o.Fragment,{children:[o.jsxs(v,{item:!0,xs:3,className:c.boxIconTitle,children:[o.jsx(i,{}),o.jsx("div",{children:s})]}),o.jsx(v,{item:!0,xs:9,children:l?l({listGenre:a}):a})]})};export{Ao as default};
